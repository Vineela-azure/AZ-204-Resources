Lab 02: 

Connection string
DefaultEndpointsProtocol=https;AccountName=funcstor14062021;AccountKey=rS86nr0dyLWLqfm3iGk0Ti8XkEhcOcqyWIb8Fu+cCMfKd6HBFVupVbWPXgoT9eDGnCiLjiChqCsmXJGBjdECLw==;EndpointSuffix=core.windows.net



Open Cloud shell and choose Powershell

mkdir funappdemo

cd funappdemo

git clone https://github.com/MicrosoftLearning/AZ-204-DevelopingSolutionsforMicrosoftAzure.git

cd Allfiles/Labs/02/Starter/func


func init MyFunctionProj


func init MyFunctionProj --worker-runtime dotnet --force

Update host.json , local.settings.json , func.csproj to look like below
------------------------------------------------------------------------

PS /home/azure/FunAppDemo/AZ-204-DevelopingSolutionsforMicrosoftAzure/Allfiles/Labs/02/Starter/func> cat host.json
{
    "version": "2.0",
    "extensionBundle": {
        "id": "Microsoft.Azure.Functions.ExtensionBundle",
        "version": "[1.*, 3.0.11)"
    }
}

PS /home/azure/FunAppDemo/AZ-204-DevelopingSolutionsforMicrosoftAzure/Allfiles/Labs/02/Starter/func> cat local.settings.json
{
    "IsEncrypted": false,
    "Values": {
        "AzureWebJobsStorage": "DefaultEndpointsProtocol=https;AccountName=funcstor14062021;AccountKey=rS86nr0dyLWLqfm3iGk0Ti8XkEhcOcqyWIb8Fu+cCMfKd6HBFVupVbWPXgoT9eDGnCiLjiChqCsmXJGBjdECLw==;EndpointSuffix=core.windows.net",
        "FUNCTIONS_WORKER_RUNTIME": "dotnet"
    }
}

PS /home/azure/FunAppDemo/AZ-204-DevelopingSolutionsforMicrosoftAzure/Allfiles/Labs/02/Starter/func> cat func.csproj
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>netcoreapp2.2</TargetFramework>
    <AzureFunctionsVersion>v2</AzureFunctionsVersion>
    <RuntimeFrameworkName>Microsoft.AspNetCore.App</RuntimeFrameworkName>
    <RuntimeFrameworkVersion>2.2.0</RuntimeFrameworkVersion>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Sdk.Functions" Version="3.0.0" />
    <PackageReference Include="Microsoft.Azure.WebJobs.Host.Storage" Version="3.0.14" />
    <PackageReference Include="Microsoft.Azure.WebJobs.Extensions.Storage" Version="3.0.6" />
  </ItemGroup>
  <ItemGroup>
    <None Update="host.json">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Update="local.settings.json">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <CopyToPublishDirectory>Never</CopyToPublishDirectory>
    </None>
  </ItemGroup>
</Project>

------------------------------------------------------------------------

func new --template "HTTP trigger" --name "Echo"

#Update host.json version to 2.0 if there is an error

Update /Echo.cs to show below code

PS /home/azure/FunAppDemo/AZ-204-DevelopingSolutionsforMicrosoftAzure/Allfiles/Labs/02/Starter/func> cat ./Echo.cs
using Microsoft.AspNetCore.Mvc;
using Microsoft.Azure.WebJobs;
using Microsoft.AspNetCore.Http;
using Microsoft.Extensions.Logging;

public static class Echo
{
    [FunctionName("Echo")]
    public static IActionResult Run(
        [HttpTrigger("POST")] HttpRequest request,
        ILogger logger)
    {
        logger.LogInformation("Received a request");
        return new OkObjectResult(request.Body);
    }
}


func new --template "Timer trigger" --name "Recurring"

func new --template "HTTP trigger" --name "GetSettingInfo"

Update GetSettingInfo.cs
-----
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Azure.WebJobs;

public static class GetSettingInfo
{

[FunctionName("GetSettingInfo")]
public static IActionResult Run(
    [HttpTrigger("GET")] HttpRequest request,
    [Blob("content/settings.json")] string json)
    => new OkObjectResult(json);
}


using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Azure.WebJobs;

public static class GetSettingInfo
{
    [FunctionName("GetSettingInfo")]
    public static IActionResult Run(
        [HttpTrigger("GET")] HttpRequest request,
        [Blob("content/settings.json")] string json)
        => new OkObjectResult(json);
}
-----
func azure functionapp publish funclogic14062021
